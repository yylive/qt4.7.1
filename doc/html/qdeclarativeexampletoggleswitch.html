<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- example-slideswitch.qdoc -->
  <title>Qt 4.7: QML Example - Toggle Switch</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://doc.qt.nokia.com">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global Declarations</a></li> 
			   <li><a href="licensing.html">Licenses and Credits</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global Declarations</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
			   <li class="defaultLink"><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li class="defaultLink"><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li class="defaultLink"><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li class="defaultLink"><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li class="defaultLink"><a href="best-practices.html">How-To's and Best Practices</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li>QML Example - Toggle Switch</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
        </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#switch-qml">Switch.qml</a></li>
<li class="level1"><a href="#walkthrough">Walkthrough</a></li>
<li class="level2"><a href="#interface">Interface</a></li>
<li class="level2"><a href="#images-and-user-interaction">Images and user interaction</a></li>
<li class="level2"><a href="#states">States</a></li>
<li class="level2"><a href="#functions">Functions</a></li>
<li class="level2"><a href="#transition">Transition</a></li>
<li class="level1"><a href="#usage">Usage</a></li>
</ul>
</div>
<h1 class="title">QML Example - Toggle Switch</h1>
<span class="subtitle"></span>
<!-- $$$qdeclarativeexampletoggleswitch.html-description -->
<div class="descr"> <a name="details"></a>
<p>This example shows how to create a reusable switch component in QML.</p>
<p>The code for this example can be found in the <tt>$QTDIR/examples/declarative/ui-components/slideswitch</tt> directory.</p>
<a name="overview"></a>
<h2>Overview</h2>
<p>The elements that composed the switch are:</p>
<ul>
<li>a <tt>on</tt> property (the interface to interact with the switch),</li>
<li>two images (the background image and the knob),</li>
<li>two mouse regions for user interation (on the background image and on the knob),</li>
<li>two states (a <i>on</i> state and a <i>off</i> state),</li>
<li>two functions or slots to react to the user interation (<tt>toggle()</tt> and <tt>dorelease()</tt>),</li>
<li>and a transition that describe how to go from one state to the other.</li>
</ul>
<a name="switch-qml"></a>
<h2>Switch.qml</h2>
<pre class="highlightedCode brush: cpp"> import QtQuick 1.0

 Item {
     id: toggleswitch
     width: background.width; height: background.height

     property bool on: false

     function toggle() {
         if (toggleswitch.state == &quot;on&quot;)
             toggleswitch.state = &quot;off&quot;;
         else
             toggleswitch.state = &quot;on&quot;;
     }

     function releaseSwitch() {
         if (knob.x == 1) {
             if (toggleswitch.state == &quot;off&quot;) return;
         }
         if (knob.x == 78) {
             if (toggleswitch.state == &quot;on&quot;) return;
         }
         toggle();
     }

     Image {
         id: background
         source: &quot;background.svg&quot;
         MouseArea { anchors.fill: parent; onClicked: toggle() }
     }

     Image {
         id: knob
         x: 1; y: 2
         source: &quot;knob.svg&quot;

         MouseArea {
             anchors.fill: parent
             drag.target: knob; drag.axis: Drag.XAxis; drag.minimumX: 1; drag.maximumX: 78
             onClicked: toggle()
             onReleased: releaseSwitch()
         }
     }

     states: [
         State {
             name: &quot;on&quot;
             PropertyChanges { target: knob; x: 78 }
             PropertyChanges { target: toggleswitch; on: true }
         },
         State {
             name: &quot;off&quot;
             PropertyChanges { target: knob; x: 1 }
             PropertyChanges { target: toggleswitch; on: false }
         }
     ]

     transitions: Transition {
         NumberAnimation { properties: &quot;x&quot;; easing.type: Easing.InOutQuad; duration: 200 }
     }
 }</pre>
<a name="walkthrough"></a>
<h2>Walkthrough</h2>
<a name="interface"></a>
<h3>Interface</h3>
<pre class="highlightedCode brush: cpp">     property bool on: false</pre>
<p>This property is the interface of the switch. By default, the switch is off and this property is <tt>false</tt>. It can be used to activate/disactivate the switch or to query its current state.</p>
<p>In this example:</p>
<pre class="highlightedCode brush: cpp"> Switch { id: mySwitch; on: true }
 Text { text: &quot;The switch is on&quot;; visible: mySwitch.on == true }</pre>
<p>the text will only be visible when the switch is on.</p>
<a name="images-and-user-interaction"></a>
<h3>Images and user interaction</h3>
<pre class="highlightedCode brush: cpp">     Image {
         id: background
         source: &quot;background.svg&quot;
         MouseArea { anchors.fill: parent; onClicked: toggle() }
     }</pre>
<p>First, we create the background image of the switch. In order for the switch to toggle when the user clicks on the background, we add a <a href="qml-mousearea.html">MouseArea</a> as a child item of the image. A <tt>MouseArea</tt> has a <tt>onClicked</tt> property that is triggered when the item is clicked. For the moment we will just call a <tt>toggle()</tt> function. We will see what this function does in a moment.</p>
<pre class="highlightedCode brush: cpp">     Image {
         id: knob
         x: 1; y: 2
         source: &quot;knob.svg&quot;

         MouseArea {
             anchors.fill: parent
             drag.target: knob; drag.axis: Drag.XAxis; drag.minimumX: 1; drag.maximumX: 78
             onClicked: toggle()
             onReleased: releaseSwitch()
         }
     }</pre>
<p>Then, we place the image of the knob on top of the background. The interaction here is a little more complex. We want the knob to move with the finger when it is clicked. That is what the <tt>drag</tt> property of the <tt>MouseArea</tt> is for. We also want to toggle the switch if the knob is released between state. We handle this case in the <tt>dorelease()</tt> function that is called in the <tt>onReleased</tt> property.</p>
<a name="states"></a>
<h3>States</h3>
<pre class="highlightedCode brush: cpp">     states: [
         State {
             name: &quot;on&quot;
             PropertyChanges { target: knob; x: 78 }
             PropertyChanges { target: toggleswitch; on: true }
         },
         State {
             name: &quot;off&quot;
             PropertyChanges { target: knob; x: 1 }
             PropertyChanges { target: toggleswitch; on: false }
         }
     ]</pre>
<p>We define the two states of the switch:</p>
<ul>
<li>In the <i>on</i> state the knob is on the right (<tt>x</tt> position is 78) and the <tt>on</tt> property is <tt>true</tt>.</li>
<li>In the <i>off</i> state the knob is on the left (<tt>x</tt> position is 1) and the <tt>on</tt> property is <tt>false</tt>.</li>
</ul>
<p>For more information on states see <a href="qdeclarativestates.html#qmlstates">QML States</a>.</p>
<a name="functions"></a>
<h3>Functions</h3>
<p>We add two <a href="https://developer.mozilla.org/en/JavaScript">JavaScript</a> functions to our switch:</p>
<pre class="highlightedCode brush: cpp">     function toggle() {
         if (toggleswitch.state == &quot;on&quot;)
             toggleswitch.state = &quot;off&quot;;
         else
             toggleswitch.state = &quot;on&quot;;
     }</pre>
<p>This first function is called when the background image or the knob are clicked. We simply want the switch to toggle between the two states (<i>on</i> and <i>off</i>).</p>
<pre class="highlightedCode brush: cpp">     function releaseSwitch() {
         if (knob.x == 1) {
             if (toggleswitch.state == &quot;off&quot;) return;
         }
         if (knob.x == 78) {
             if (toggleswitch.state == &quot;on&quot;) return;
         }
         toggle();
     }</pre>
<p>This second function is called when the knob is released and we want to make sure that the knob does not end up between states (neither <i>on</i> nor <i>off</i>). If it is the case call the <tt>toggle()</tt> function otherwise we do nothing.</p>
<p>For more information on scripts see <a href="qdeclarativejavascript.html">Integrating JavaScript</a>.</p>
<a name="transition"></a>
<h3>Transition</h3>
<pre class="highlightedCode brush: cpp">     transitions: Transition {
         NumberAnimation { properties: &quot;x&quot;; easing.type: Easing.InOutQuad; duration: 200 }
     }</pre>
<p>At this point, when the switch toggles between the two states the knob will instantly change its <tt>x</tt> position between 1 and 78. In order for the the knob to move smoothly we add a transition that will animate the <tt>x</tt> property with an easing curve for a duration of 200ms.</p>
<p>For more information on transitions see <a href="qdeclarativeanimation.html#transitions">QML Transitions</a>.</p>
<a name="usage"></a>
<h2>Usage</h2>
<p>The switch can be used in a QML file, like this:</p>
<pre class="highlightedCode brush: cpp">     Switch { anchors.centerIn: parent; on: false }</pre>
</div>
<!-- @@@qdeclarativeexampletoggleswitch.html -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    </div> 
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
    <br />
    <p>
      Licensees holding valid Qt Commercial licenses may use this document in accordance with the      Qt Commercial License Agreement provided with the Software or, alternatively, in accordance      with the terms contained in a written agreement between you and Nokia.</p>
    <p>
      Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
      Free Documentation License version 1.3</a>
      as published by the Free Software Foundation.</p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback.</p> <p class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
</body>
</html>
