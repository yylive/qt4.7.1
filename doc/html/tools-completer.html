<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- completer.qdoc -->
  <title>Qt 4.7: Completer Example</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://doc.qt.nokia.com">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global Declarations</a></li> 
			   <li><a href="licensing.html">Licenses and Credits</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global Declarations</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
			   <li class="defaultLink"><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li class="defaultLink"><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li class="defaultLink"><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li class="defaultLink"><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li class="defaultLink"><a href="best-practices.html">How-To's and Best Practices</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li><a href="all-examples.html">Examples</a></li>              <li>Completer Example</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
        </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#the-resource-file">The Resource File</a></li>
<li class="level1"><a href="#filesystemmodel-class-definition">FileSystemModel Class Definition</a></li>
<li class="level1"><a href="#filesystemmodel-class-implementation">FileSystemModel Class Implementation</a></li>
<li class="level1"><a href="#mainwindow-class-definition">MainWindow Class Definition</a></li>
<li class="level1"><a href="#mainwindow-class-implementation">MainWindow Class Implementation</a></li>
<li class="level1"><a href="#function"><tt>main()</tt> Function</a></li>
</ul>
</div>
<h1 class="title">Completer Example</h1>
<span class="subtitle"></span>
<!-- $$$tools/completer-description -->
<div class="descr"> <a name="details"></a>
<p>Files:</p>
<ul>
<li><a href="tools-completer-fsmodel-cpp.html">tools/completer/fsmodel.cpp</a></li>
<li><a href="tools-completer-fsmodel-h.html">tools/completer/fsmodel.h</a></li>
<li><a href="tools-completer-mainwindow-cpp.html">tools/completer/mainwindow.cpp</a></li>
<li><a href="tools-completer-mainwindow-h.html">tools/completer/mainwindow.h</a></li>
<li><a href="tools-completer-main-cpp.html">tools/completer/main.cpp</a></li>
<li><a href="tools-completer-completer-pro.html">tools/completer/completer.pro</a></li>
<li><a href="tools-completer-completer-qrc.html">tools/completer/completer.qrc</a></li>
</ul>
<p>The Completer example shows how to provide string-completion facilities for an input widget based on data provided by a model.</p>
<p class="centerAlign"><img src="images/completer-example.png" /></p><p>This example uses a custom item model, <tt>FileSystemModel</tt>, and a <a href="qcompleter.html">QCompleter</a> object. <a href="qcompleter.html">QCompleter</a> is a class that provides completions based on an item model. The type of model, the completion mode, and the case sensitivity can be selected using combo boxes.</p>
<a name="the-resource-file"></a>
<h2>The Resource File</h2>
<p>The Completer example requires a resource file in order to store the <i>countries.txt</i> and <i>words.txt</i>. The resource file contains the following code:</p>
<pre class="highlightedCode brush: cpp"> &lt;!DOCTYPE RCC&gt;&lt;RCC version=&quot;1.0&quot;&gt;
 &lt;qresource prefix=&quot;/&quot;&gt;
    &lt;file&gt;resources/countries.txt&lt;/file&gt;
    &lt;file&gt;resources/wordlist.txt&lt;/file&gt;
 &lt;/qresource&gt;
 &lt;/RCC&gt;</pre>
<a name="filesystemmodel-class-definition"></a>
<h2>FileSystemModel Class Definition</h2>
<p>The <tt>FileSystemModel</tt> class is a subclass of <a href="qfilesystemmodel.html">QFileSystemModel</a>, which provides a data model for the local filesystem.</p>
<pre class="highlightedCode brush: cpp"> class FileSystemModel : public QFileSystemModel
 {
 public:
     FileSystemModel(QObject *parent = 0);
     QVariant data(const QModelIndex &amp;index, int role = Qt::DisplayRole) const;
 };</pre>
<p>This class only has a constructor and a <tt>data()</tt> function as it is only created to enable <tt>data()</tt> to return the entire file path for the display role, unlike <a href="qfilesystemmodel.html">QFileSystemModel</a>'s <tt>data()</tt> function that only returns the folder and not the drive label. This is further explained in <tt>FileSystemModel</tt>'s implementation.</p>
<a name="filesystemmodel-class-implementation"></a>
<h2>FileSystemModel Class Implementation</h2>
<p>The constructor for the <tt>FileSystemModel</tt> class is used to pass <i>parent</i> to <a href="qfilesystemmodel.html">QFileSystemModel</a>.</p>
<pre class="highlightedCode brush: cpp"> FileSystemModel::FileSystemModel(QObject *parent)
     : QFileSystemModel(parent)
 {
 }</pre>
<p>As mentioned earlier, the <tt>data()</tt> function is reimplemented in order to get it to return the entire file parth for the display role. For example, with a <a href="qfilesystemmodel.html">QFileSystemModel</a>, you will see &quot;Program Files&quot; in the view. However, with <tt>FileSystemModel</tt>, you will see &quot;C:\Program Files&quot;.</p>
<pre class="highlightedCode brush: cpp"> QVariant FileSystemModel::data(const QModelIndex &amp;index, int role) const
 {
     if (role == Qt::DisplayRole &amp;&amp; index.column() == 0) {
         QString path  = QDir::toNativeSeparators(filePath(index));
         if (path.endsWith(QDir::separator()))
             path.chop(1);
         return path;
     }

     return QFileSystemModel::data(index, role);
 }</pre>
<p>The screenshots below illustrate this difference:</p>
<table class="generic">
<tr class="odd topAlign"><td ><p><img src="images/completer-example-qdirmodel.png" /></p></td><td ><p><img src="images/completer-example-dirmodel.png" /></p></td></tr>
</table>
<p>The <a href="qt.html#ItemDataRole-enum">Qt::EditRole</a>, which <a href="qcompleter.html">QCompleter</a> uses to look for matches, is left unchanged.</p>
<a name="mainwindow-class-definition"></a>
<h2>MainWindow Class Definition</h2>
<p>The <tt>MainWindow</tt> class is a subclass of <a href="qmainwindow.html">QMainWindow</a> and implements five private slots - <tt>about()</tt>, <tt>changeCase()</tt>, <tt>changeMode()</tt>, <tt>changeModel()</tt>, and <tt>changeMaxVisible()</tt>.</p>
<pre class="highlightedCode brush: cpp"> class MainWindow : public QMainWindow
 {
     Q_OBJECT

 public:
     MainWindow(QWidget *parent = 0);

 private slots:
     void about();
     void changeCase(int);
     void changeMode(int);
     void changeModel();
     void changeMaxVisible(int);</pre>
<p>Within the <tt>MainWindow</tt> class, we have two private functions: <tt>createMenu()</tt> and <tt>modelFromFile()</tt>. We also declare the private widgets needed - three <a href="qcombobox.html">QComboBox</a> objects, a <a href="qcheckbox.html">QCheckBox</a>, a <a href="qcompleter.html">QCompleter</a>, a <a href="qlabel.html">QLabel</a>, and a <a href="qlineedit.html">QLineEdit</a>.</p>
<pre class="highlightedCode brush: cpp"> private:
     void createMenu();
     QAbstractItemModel *modelFromFile(const QString&amp; fileName);

     QComboBox *caseCombo;
     QComboBox *modeCombo;
     QComboBox *modelCombo;
     QSpinBox *maxVisibleSpinBox;
     QCheckBox *wrapCheckBox;
     QCompleter *completer;
     QLabel *contentsLabel;
     QLineEdit *lineEdit;
 };</pre>
<a name="mainwindow-class-implementation"></a>
<h2>MainWindow Class Implementation</h2>
<p>The constructor of <tt>MainWindow</tt> constructs a <tt>MainWindow</tt> with a parent widget and initializes the private members. The <tt>createMenu()</tt> function is then invoked.</p>
<p>We set up three <a href="qcombobox.html">QComboBox</a> objects, <tt>modelComb</tt>, <tt>modeCombo</tt> and <tt>caseCombo</tt>. By default, the <tt>modelCombo</tt> is set to <a href="qfilesystemmodel.html">QFileSystemModel</a>, the <tt>modeCombo</tt> is set to &quot;Filtered Popup&quot; and the <tt>caseCombo</tt> is set to &quot;Case Insensitive&quot;.</p>
<pre class="highlightedCode brush: cpp"> MainWindow::MainWindow(QWidget *parent)
     : QMainWindow(parent), completer(0), lineEdit(0)
 {
     createMenu();

     QWidget *centralWidget = new QWidget;

     QLabel *modelLabel = new QLabel;
     modelLabel-&gt;setText(tr(&quot;Model&quot;));

     modelCombo = new QComboBox;
     modelCombo-&gt;addItem(tr(&quot;QFileSytemModel&quot;));
     modelCombo-&gt;addItem(tr(&quot;QFileSytemModel that shows full path&quot;));
     modelCombo-&gt;addItem(tr(&quot;Country list&quot;));
     modelCombo-&gt;addItem(tr(&quot;Word list&quot;));
     modelCombo-&gt;setCurrentIndex(0);

     QLabel *modeLabel = new QLabel;
     modeLabel-&gt;setText(tr(&quot;Completion Mode&quot;));
     modeCombo = new QComboBox;
     modeCombo-&gt;addItem(tr(&quot;Inline&quot;));
     modeCombo-&gt;addItem(tr(&quot;Filtered Popup&quot;));
     modeCombo-&gt;addItem(tr(&quot;Unfiltered Popup&quot;));
     modeCombo-&gt;setCurrentIndex(1);

     QLabel *caseLabel = new QLabel;
     caseLabel-&gt;setText(tr(&quot;Case Sensitivity&quot;));
     caseCombo = new QComboBox;
     caseCombo-&gt;addItem(tr(&quot;Case Insensitive&quot;));
     caseCombo-&gt;addItem(tr(&quot;Case Sensitive&quot;));
     caseCombo-&gt;setCurrentIndex(0);</pre>
<p>The <tt>maxVisibleSpinBox</tt> is created and determines the number of visible item in the completer</p>
<p>The <tt>wrapCheckBox</tt> is then set up. This <tt>checkBox</tt> determines if the <tt>completer</tt>'s <a href="qcompleter.html#wrapAround-prop">setWrapAround()</a> property is enabled or disabled.</p>
<pre class="highlightedCode brush: cpp">     QLabel *maxVisibleLabel = new QLabel;
     maxVisibleLabel-&gt;setText(tr(&quot;Max Visible Items&quot;));
     maxVisibleSpinBox = new QSpinBox;
     maxVisibleSpinBox-&gt;setRange(3,25);
     maxVisibleSpinBox-&gt;setValue(10);

     wrapCheckBox = new QCheckBox;
     wrapCheckBox-&gt;setText(tr(&quot;Wrap around completions&quot;));
     wrapCheckBox-&gt;setChecked(true);</pre>
<p>We instantiate <tt>contentsLabel</tt> and set its size policy to <a href="qsizepolicy.html#Policy-enum">fixed</a>. The combo boxes' <a href="qcombobox.html#activated">activated()</a> signals are then connected to their respective slots.</p>
<pre class="highlightedCode brush: cpp">     contentsLabel = new QLabel;
     contentsLabel-&gt;setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);

     connect(modelCombo, SIGNAL(activated(int)), this, SLOT(changeModel()));
     connect(modeCombo, SIGNAL(activated(int)), this, SLOT(changeMode(int)));
     connect(caseCombo, SIGNAL(activated(int)), this, SLOT(changeCase(int)));
     connect(maxVisibleSpinBox, SIGNAL(valueChanged(int)), this, SLOT(changeMaxVisible(int)));</pre>
<p>The <tt>lineEdit</tt> is set up and then we arrange all the widgets using a <a href="qgridlayout.html">QGridLayout</a>. The <tt>changeModel()</tt> function is called, to initialize the <tt>completer</tt>.</p>
<pre class="highlightedCode brush: cpp">     lineEdit = new QLineEdit;

     QGridLayout *layout = new QGridLayout;
     layout-&gt;addWidget(modelLabel, 0, 0); layout-&gt;addWidget(modelCombo, 0, 1);
     layout-&gt;addWidget(modeLabel, 1, 0);  layout-&gt;addWidget(modeCombo, 1, 1);
     layout-&gt;addWidget(caseLabel, 2, 0);  layout-&gt;addWidget(caseCombo, 2, 1);
     layout-&gt;addWidget(maxVisibleLabel, 3, 0); layout-&gt;addWidget(maxVisibleSpinBox, 3, 1);
     layout-&gt;addWidget(wrapCheckBox, 4, 0);
     layout-&gt;addWidget(contentsLabel, 5, 0, 1, 2);
     layout-&gt;addWidget(lineEdit, 6, 0, 1, 2);
     centralWidget-&gt;setLayout(layout);
     setCentralWidget(centralWidget);

     changeModel();

     setWindowTitle(tr(&quot;Completer&quot;));
     lineEdit-&gt;setFocus();
 }</pre>
<p>The <tt>createMenu()</tt> function is used to instantiate the <a href="qaction.html">QAction</a> objects needed to fill the <tt>fileMenu</tt> and <tt>helpMenu</tt>. The actions' <a href="qaction.html#triggered">triggered()</a> signals are connected to their respective slots.</p>
<pre class="highlightedCode brush: cpp"> void MainWindow::createMenu()
 {
     QAction *exitAction = new QAction(tr(&quot;Exit&quot;), this);
     QAction *aboutAct = new QAction(tr(&quot;About&quot;), this);
     QAction *aboutQtAct = new QAction(tr(&quot;About Qt&quot;), this);

     connect(exitAction, SIGNAL(triggered()), qApp, SLOT(quit()));
     connect(aboutAct, SIGNAL(triggered()), this, SLOT(about()));
     connect(aboutQtAct, SIGNAL(triggered()), qApp, SLOT(aboutQt()));

     QMenu* fileMenu = menuBar()-&gt;addMenu(tr(&quot;File&quot;));
     fileMenu-&gt;addAction(exitAction);

     QMenu* helpMenu = menuBar()-&gt;addMenu(tr(&quot;About&quot;));
     helpMenu-&gt;addAction(aboutAct);
     helpMenu-&gt;addAction(aboutQtAct);
 }</pre>
<p>The <tt>modelFromFile()</tt> function accepts the <i>fileName</i> of a file and processes it depending on its contents.</p>
<p>We first validate the <tt>file</tt> to ensure that it can be opened in <a href="qiodevice.html#OpenModeFlag-enum">QFile::ReadOnly</a> mode. If this is unsuccessful, the function returns an empty <a href="qstringlistmodel.html">QStringListModel</a>.</p>
<pre class="highlightedCode brush: cpp"> QAbstractItemModel *MainWindow::modelFromFile(const QString&amp; fileName)
 {
     QFile file(fileName);
     if (!file.open(QFile::ReadOnly))
         return new QStringListModel(completer);</pre>
<p>The mouse cursor is then overriden with <a href="qt.html#CursorShape-enum">Qt::WaitCursor</a> before we fill a <a href="qstringlist.html">QStringList</a> object, <tt>words</tt>, with the contents of <tt>file</tt>. Once this is done, we restore the mouse cursor.</p>
<pre class="highlightedCode brush: cpp"> #ifndef QT_NO_CURSOR
     QApplication::setOverrideCursor(QCursor(Qt::WaitCursor));
 #endif
     QStringList words;

     while (!file.atEnd()) {
         QByteArray line = file.readLine();
         if (!line.isEmpty())
             words &lt;&lt; line.trimmed();
     }

 #ifndef QT_NO_CURSOR
     QApplication::restoreOverrideCursor();
 #endif</pre>
<p>As mentioned earlier, the resources file contains two files - <i>countries.txt</i> and <i>words.txt</i>. If the <tt>file</tt> read is <i>words.txt</i>, we return a <a href="qstringlistmodel.html">QStringListModel</a> with <tt>words</tt> as its <a href="qstringlist.html">QStringList</a> and <tt>completer</tt> as its parent.</p>
<pre class="highlightedCode brush: cpp">     if (!fileName.contains(QLatin1String(&quot;countries.txt&quot;)))
         return new QStringListModel(words, completer);</pre>
<p>If the <tt>file</tt> read is <i>countries.txt</i>, then we require a <a href="qstandarditemmodel.html">QStandardItemModel</a> with <tt>words.count()</tt> rows, 2 columns, and <tt>completer</tt> as its parent.</p>
<pre class="highlightedCode brush: cpp">     QStandardItemModel *m = new QStandardItemModel(words.count(), 2, completer);</pre>
<p>A standard line in <i>countries.txt</i> is:</p>
<blockquote><p>Norway NO</p>
</blockquote>
<p>Hence, to populate the <a href="qstandarditemmodel.html">QStandardItemModel</a> object, <tt>m</tt>, we have to split the country name and its symbol. Once this is done, we return <tt>m</tt>.</p>
<pre class="highlightedCode brush: cpp">     for (int i = 0; i &lt; words.count(); ++i) {
         QModelIndex countryIdx = m-&gt;index(i, 0);
         QModelIndex symbolIdx = m-&gt;index(i, 1);
         QString country = words[i].mid(0, words[i].length() - 2).trimmed();
         QString symbol = words[i].right(2);
         m-&gt;setData(countryIdx, country);
         m-&gt;setData(symbolIdx, symbol);
     }

     return m;
 }</pre>
<p>The <tt>changeMode()</tt> function sets the <tt>completer</tt>'s mode, depending on the value of <tt>index</tt>.</p>
<pre class="highlightedCode brush: cpp"> void MainWindow::changeMode(int index)
 {
     QCompleter::CompletionMode mode;
     if (index == 0)
         mode = QCompleter::InlineCompletion;
     else if (index == 1)
         mode = QCompleter::PopupCompletion;
     else
         mode = QCompleter::UnfilteredPopupCompletion;

     completer-&gt;setCompletionMode(mode);
 }</pre>
<p>The <tt>changeModel()</tt> function changes the item model used based on the model selected by the user.</p>
<p>A <tt>switch</tt> statement is used to change the item model based on the index of <tt>modelCombo</tt>. If <tt>case</tt> is 0, we use an unsorted <a href="qfilesystemmodel.html">QFileSystemModel</a>, providing us with a file path excluding the drive label.</p>
<pre class="highlightedCode brush: cpp"> void MainWindow::changeModel()
 {
     delete completer;
     completer = new QCompleter(this);
     completer-&gt;setMaxVisibleItems(maxVisibleSpinBox-&gt;value());

     switch (modelCombo-&gt;currentIndex()) {
     default:
     case 0:
         { <span class="comment">// Unsorted QFileSystemModel</span>
             QFileSystemModel *fsModel = new QFileSystemModel(completer);
             fsModel-&gt;setRootPath(&quot;&quot;);
             completer-&gt;setModel(fsModel);
             contentsLabel-&gt;setText(tr(&quot;Enter file path&quot;));
         }
         break;</pre>
<p>Note that we create the model with <tt>completer</tt> as the parent as this allows us to replace the model with a new model. The <tt>completer</tt> will ensure that the old one is deleted the moment a new model is assigned to it.</p>
<p>If <tt>case</tt> is 1, we use the <tt>DirModel</tt> we defined earlier, resulting in full paths for the files.</p>
<pre class="highlightedCode brush: cpp">     case 1:
         {   <span class="comment">// FileSystemModel that shows full paths</span>
             FileSystemModel *fsModel = new FileSystemModel(completer);
             completer-&gt;setModel(fsModel);
             fsModel-&gt;setRootPath(&quot;&quot;);
             contentsLabel-&gt;setText(tr(&quot;Enter file path&quot;));
         }
         break;</pre>
<p>When <tt>case</tt> is 2, we attempt to complete names of countries. This requires a <a href="qtreeview.html">QTreeView</a> object, <tt>treeView</tt>. The country names are extracted from <i>countries.txt</i> and set the popup used to display completions to <tt>treeView</tt>.</p>
<pre class="highlightedCode brush: cpp">     case 2:
         { <span class="comment">// Country List</span>
             completer-&gt;setModel(modelFromFile(&quot;:/resources/countries.txt&quot;));
             QTreeView *treeView = new QTreeView;
             completer-&gt;setPopup(treeView);
             treeView-&gt;setRootIsDecorated(false);
             treeView-&gt;header()-&gt;hide();
             treeView-&gt;header()-&gt;setStretchLastSection(false);
             treeView-&gt;header()-&gt;setResizeMode(0, QHeaderView::Stretch);
             treeView-&gt;header()-&gt;setResizeMode(1, QHeaderView::ResizeToContents);
             contentsLabel-&gt;setText(tr(&quot;Enter name of your country&quot;));
         }
         break;</pre>
<p>The screenshot below shows the Completer with the country list model.</p>
<p class="centerAlign"><img src="images/completer-example-country.png" /></p><p>If <tt>case</tt> is 3, we attempt to complete words. This is done using a <a href="qstringlistmodel.html">QStringListModel</a> that contains data extracted from <i>words.txt</i>. The model is sorted <a href="qcompleter.html#ModelSorting-enum">case insensitively</a>.</p>
<p>The screenshot below shows the Completer with the word list model.</p>
<p class="centerAlign"><img src="images/completer-example-word.png" /></p><p>Once the model type is selected, we call the <tt>changeMode()</tt> function and the <tt>changeCase()</tt> function and set the wrap option accordingly. The <tt>wrapCheckBox</tt>'s <a href="qabstractbutton.html#clicked">clicked()</a> signal is connected to the <tt>completer</tt>'s <a href="qcompleter.html#wrapAround-prop">setWrapAround()</a> slot.</p>
<pre class="highlightedCode brush: cpp">     case 3:
         { <span class="comment">// Word list</span>
             completer-&gt;setModel(modelFromFile(&quot;:/resources/wordlist.txt&quot;));
             completer-&gt;setModelSorting(QCompleter::CaseInsensitivelySortedModel);
             contentsLabel-&gt;setText(tr(&quot;Enter a word&quot;));
         }
         break;
     }

     changeMode(modeCombo-&gt;currentIndex());
     changeCase(caseCombo-&gt;currentIndex());
     completer-&gt;setWrapAround(wrapCheckBox-&gt;isChecked());
     lineEdit-&gt;setCompleter(completer);
     connect(wrapCheckBox, SIGNAL(clicked(bool)), completer, SLOT(setWrapAround(bool)));
 }</pre>
<p>The <tt>changeMaxVisible()</tt> update the maximum number of visible items in the completer.</p>
<pre class="highlightedCode brush: cpp"> void MainWindow::changeMaxVisible(int max)
 {
     completer-&gt;setMaxVisibleItems(max);
 }</pre>
<p>The <tt>about()</tt> function provides a brief description about the example.</p>
<pre class="highlightedCode brush: cpp"> void MainWindow::about()
 {
     QMessageBox::about(this, tr(&quot;About&quot;), tr(&quot;This example demonstrates the &quot;
         &quot;different features of the QCompleter class.&quot;));
 }</pre>
<a name="function"></a>
<h2><tt>main()</tt> Function</h2>
<p>The <tt>main()</tt> function instantiates <a href="qapplication.html">QApplication</a> and <tt>MainWindow</tt> and invokes the <a href="qwidget.html#show">show()</a> function.</p>
<pre class="highlightedCode brush: cpp"> int main(int argc, char *argv[])
 {
     Q_INIT_RESOURCE(completer);

     QApplication app(argc, argv);
     MainWindow window;
     window.show();
     return app.exec();
 }</pre>
</div>
<!-- @@@tools/completer -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    </div> 
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
    <br />
    <p>
      Licensees holding valid Qt Commercial licenses may use this document in accordance with the      Qt Commercial License Agreement provided with the Software or, alternatively, in accordance      with the terms contained in a written agreement between you and Nokia.</p>
    <p>
      Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
      Free Documentation License version 1.3</a>
      as published by the Free Software Foundation.</p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback.</p> <p class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
</body>
</html>
