<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qdeclarativestates.qdoc -->
  <title>Qt 4.7: QML States</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://doc.qt.nokia.com">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global Declarations</a></li> 
			   <li><a href="licensing.html">Licenses and Credits</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global Declarations</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
			   <li class="defaultLink"><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
			   <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li class="defaultLink"><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
			   <li class="defaultLink"><a href="developing-with-qt.html">Cross-platform and Platform-specific</a></li> 
			   <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li class="defaultLink"><a href="technology-apis.html">Qt and Key Technologies</a></li> 
			   <li class="defaultLink"><a href="best-practices.html">How-To's and Best Practices</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li>QML States</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
        </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#creating-states">Creating states</a></li>
<li class="level1"><a href="#the-default-state">The default state</a></li>
<li class="level1"><a href="#animating-state-changes">Animating state changes</a></li>
</ul>
</div>
<h1 class="title">QML States</h1>
<span class="subtitle"></span>
<!-- $$$qdeclarativestates.html-description -->
<div class="descr"> <a name="details"></a>
<a name="qmlstates"></a><a name="overview"></a>
<h2>Overview</h2>
<p>User interfaces are designed to present different interface configurations in different scenarios, or to modify their appearances in response to user interaction. Often, there are a set of changes that are made concurrently, such that the interface could be seen to be internally changing from one <i>state</i> to another.</p>
<p>This applies generally to interface elements regardless of their complexity. A photo viewer may initially present images in a grid, and when an image is clicked, change to a &quot;detailed&quot; state where the individual image is expanded and the interface is changed to present new options for image editing. On the other end of the scale, when a simple button is pressed, it may change to a &quot;pressed&quot; state in which its color and position is modified to give a pressed appearance.</p>
<p>In QML, any object can change between different <i>states</i> to apply sets of changes that modify the properties of relevant items. Each <i>state</i> could present a different configuration that could, for example:</p>
<ul>
<li>Show some UI elements and hide others</li>
<li>Present different available actions to the user</li>
<li>Start, stop or pause animations</li>
<li>Execute some script required in the new state</li>
<li>Change a property value for a particular item</li>
<li>Show a different view or &quot;screen&quot;</li>
</ul>
<p>Changes between states can be animated using <a href="qdeclarativeanimation.html#transitions">transitions</a>, as discussed further below.</p>
<p>All <a href="qml-item.html">Item</a>-based objects have a <i>default state</i>, and can specify additional states by adding new <a href="qml-state.html">State</a> objects to the item's <a href="qml-item.html#states-prop">states</a> property. Each state has a <i>name</i> that is unique for all states within that item; the default state's name is an empty string. To change the current state of an item, set the <a href="qml-item.html#state-prop">state</a> property to the name of the state.</p>
<p>Non-Item objects can use states through the <a href="qml-stategroup.html">StateGroup</a> element.</p>
<a name="creating-states"></a>
<h2>Creating states</h2>
<p>To create a state, add a <a href="qml-state.html">State</a> object to the item's <a href="qml-item.html#states-prop">states</a> property, which holds a list of states for that item.</p>
<p>Following is an example. Here, the <a href="qml-rectangle.html">Rectangle</a> is initially placed in the default (0, 0) position. It has defined an additional state named &quot;moved&quot;, in which a <a href="qml-propertychanges.html">PropertyChanges</a> object repositions the rectangle to (50, 50). Clicking within the <a href="qml-mousearea.html">MouseArea</a> changes the state to the &quot;moved&quot; state, thus moving the <a href="qml-rectangle.html">Rectangle</a>.</p>
<pre class="highlightedCode brush: cpp"> import QtQuick 1.0

 Rectangle {
     id: myRect
     width: 200; height: 200
     color: &quot;red&quot;

     MouseArea {
         anchors.fill: parent
         onClicked: myRect.state = 'moved'
     }

     states: [
         State {
             name: &quot;moved&quot;
             PropertyChanges { target: myRect; x: 50; y: 50 }
         }
     ]
 }</pre>
<p>The <a href="qml-state.html">State</a> item defines all the changes to be made in the new state. It could specify additional properties to be changed, or create additional <a href="qml-propertychanges.html">PropertyChanges</a> for other objects. It can also modify the properties of other objects, not just the object that owns the state. For example:</p>
<pre class="highlightedCode brush: cpp"> Rectangle {
     ...
     states: [
         State {
             name: &quot;moved&quot;
             PropertyChanges { target: myRect; x: 50; y: 50; color: &quot;blue&quot; }
             PropertyChanges { target: someOtherItem; width: 1000 }
         }
     ]
 }</pre>
<p>As a convenience, if an item only has one state, its <a href="qml-item.html#states-prop">states</a> property can be defined as a single <a href="qml-state.html">State</a>, without the square-brace list syntax:</p>
<pre class="highlightedCode brush: cpp"> Item {
     ...
     states: State {
         ...
     }
 }</pre>
<p>A <a href="qml-state.html">State</a> is not limited to performing modifications on property values. It can also:</p>
<ul>
<li>Run some script using <a href="qml-statechangescript.html">StateChangeScript</a></li>
<li>Override an existing signal handler for an object using <a href="qml-propertychanges.html">PropertyChanges</a></li>
<li>Re-parent an <a href="qml-item.html">Item</a> using ParentChanges</li>
<li>Modify anchor values using <a href="qml-anchorchanges.html">AnchorChanges</a></li>
</ul>
<p>The <a href="declarative-animation-states.html">States and Transitions example</a> demonstrates how to declare a basic set of states and apply animated transitions between them.</p>
<a name="the-default-state"></a>
<h2>The default state</h2>
<p>Of course, the <a href="qml-rectangle.html">Rectangle</a> in the example above could have simply been moved by setting its position to (50, 50) in the mouse area's <tt>onClicked</tt> handler. However, aside from enabling batched property changes, one of the features of QML states is the ability of an item to revert to its <i>default state</i>. The default state contains all of an item's initial property values before they were modified in a state change.</p>
<p>For example, suppose the <a href="qml-rectangle.html">Rectangle</a> should move to (50,50) when the mouse is pressed, and then move back to its original position when the mouse is released. This can be achieved by using the <a href="qml-state.html#when-prop">when</a> property, like this:</p>
<pre class="highlightedCode brush: cpp"> Rectangle {
     ...

     MouseArea {
         id: mouseArea
         anchors.fill: parent
     }

     states: State {
         name: &quot;moved&quot;; when: mouseArea.pressed
         ...
     }
 }</pre>
<p>The <a href="qml-state.html#when-prop">when</a> property is set to an expression that evaluates to <tt>true</tt> when the item should be set to that state. When the mouse is pressed, the state is changed to <i>moved</i>. When it is released, the item reverts to its <i>default</i> state, which defines all of the item's original property values.</p>
<p>Alternatively, an item can be explicitly set to its default state by setting its <a href="qml-item.html#state-prop">state</a> property to an empty string (&quot;&quot;). For example, instead of using the <a href="qml-state.html#when-prop">when</a> property, the above code could be changed to:</p>
<pre class="highlightedCode brush: cpp"> Rectangle {
     ...

     MouseArea {
         anchors.fill: parent
         onPressed: myRect.state = 'moved';
         onReleased: myRect.state = '';
     }

     states: State {
         name: &quot;moved&quot;
         ...
     }
 }</pre>
<p>Obviously it makes sense to use the <a href="qml-state.html#when-prop">when</a> property when possible as it provides a simpler (and a better, more declarative) solution than assigning the state from signal handlers.</p>
<a name="animating-state-changes"></a>
<h2>Animating state changes</h2>
<p>State changes can be easily animated through <a href="qdeclarativeanimation.html#transitions">transitions</a>. A <a href="qml-transition.html">Transition</a> defines the animations that should be applied when an item changes from one state to another.</p>
<p>If the above example was modified to include the following <a href="qml-transition.html">Transition</a>, the movement of the <a href="qml-rectangle.html">Rectangle</a> would be animated:</p>
<pre class="highlightedCode brush: cpp"> Rectangle {
     ...

     MouseArea { ... }

     states: [
        ...
     ]

     transitions: [
         Transition {
             NumberAnimation { properties: &quot;x,y&quot;; duration: 500 }
         }
     ]
  }</pre>
<p>This <a href="qml-transition.html">Transition</a> defines that if any <tt>x</tt> or <tt>y</tt> properties have changed during a state change within this item, their values should be animated over 500 millliseconds.</p>
<p>See the <a href="qdeclarativeanimation.html#transitions">Transitions</a> documentation for more information.</p>
</div>
<!-- @@@qdeclarativestates.html -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    </div> 
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
    <br />
    <p>
      Licensees holding valid Qt Commercial licenses may use this document in accordance with the      Qt Commercial License Agreement provided with the Software or, alternatively, in accordance      with the terms contained in a written agreement between you and Nokia.</p>
    <p>
      Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
      Free Documentation License version 1.3</a>
      as published by the Free Software Foundation.</p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback.</p> <p class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
</body>
</html>
